bug的表现:
在vs调试状态启动会弹出如下对话框, 程序无法继续, 且程序出错的位置定位比较诡异. 但是直接启动程序可以正常运行:
This may be due to a corruption of the heap, ...
This may also be due to the user pressing F12 while EQClient_dr.exe has focus.

bug原因分析:
我们没注册F12相关的东西. 那就是说"堆"出错拉, 或者就是说在new或者malloc相关的操作出错, 基本可以确定是在new出来的"堆"内存越界访问.(ps:微软在内存管理上实在恶心,越界访问都不一定都报错)

工程改为debug, 调试启动, 在new FriendSystem的构造函数里面出错.经过艰苦的排查(略过n多蛋疼查找过程), 最后发现new出来的内存大小和sizeof(FriendSystem)的大小不一致. (感谢谢俊发现了这个问题) 还发现EQclient对应目录文件夹和EQComm对应目录文件夹都有FriendSystem.h的文件, 但是EQclient下的文件没有加入工程, 这应该是农场分离拷贝过去的文件, 后来没有使用, 而没删除. 删除EQclient的对应文件后, 在rebuild, 程序正常.

最后得出结论: 在new的时候使用了EQclient下的FriendSystem的大小. -> vs编译器神奇的出错了.

解决方法: 删除同名文件